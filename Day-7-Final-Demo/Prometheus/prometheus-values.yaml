alertmanager:
  enabled: true

server:
  global:
    scrape_interval: 15s
  alerting:
    alertmanagers:
      - static_configs:
          - targets:
              - "alertmanager:9093"
  rule_files:
    - /etc/prometheus/alert-rules.yaml
  extraVolumeMounts:
    - name: alert-rules
      mountPath: /etc/prometheus/alert-rules.yaml
      subPath: alert-rules.yaml
  extraVolumes:
    - name: alert-rules
      configMap:
        name: prometheus-alert-rules

serverFiles:
  alerting_rules.yml:
    groups:
      - name: demo-rules
        rules:
          - alert: DemoMemoryAlert
            expr: node_memory_Active_bytes > 1000000000
            for: 1m
            labels:
              severity: warning
            annotations:
              summary: "Memory usage high on demo node"
